<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="cleartype" content="on">
    <meta name="MobileOptimized" content="320">
    <meta name="HandheldFriendly" content="True">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="description" content="An open Bible designed for reading.">
    <meta name="keywords" content="slideout, offcanvas, javascript, menu, touch">
    <meta name="author" content="Mango">
    <meta property="twitter:card" content="summary">
    <meta property="twitter:site" content="@openbibleapp">
    <meta property="twitter:title" content="OpenBible">
    <meta property="twitter:description" content="An open Bible designed for reading.">
    <meta property="twitter:url" content="https://openbible.io">
    <meta property="twitter:image" content="https://mango.github.io/slideout/assets/mango-logo.png">

    <title>Open Bible</title>

    <script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.4.0-rc.0/angular.min.js'></script>
    <script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.4.0-rc.0/angular-animate.min.js'></script>
    <script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.4.0-rc.0/angular-resource.min.js'></script>
    <script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.4.0-rc.0/angular-route.min.js'></script>
    <script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.4.0-rc.0/angular-sanitize.min.js'></script>

    <!--
    <script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.2.0/leaflet-omnivore.min.js'></script>
    <script src='https://api.tiles.mapbox.com/mapbox.js/v2.1.4/mapbox.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox.js/v2.1.4/mapbox.css' rel='stylesheet' />
    -->

    <script src='/static/components/ngInfiniteScroll/build/ng-infinite-scroll.min.js'></script>
    <script src='/static/components/slideout/dist/slideout.js'></script>

    <script src='/static/js/app.js'></script>
    <script src='/static/js/book.js'></script>
    <script src='/static/js/map.js'></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">

    <link rel='stylesheet' href='/static/css/fonts.css'>
    <link rel='stylesheet' href='/static/css/main.css'>

    <link href='http://fonts.googleapis.com/css?family=Noto+Sans:400,700|Noto+Serif:400,700' rel='stylesheet' type='text/css'>
  </head>

  <body ng-app='app' ng-controller='AppCtrl'>
    <a href="javascript:slideout.toggle()" class="menu-navbar">
    </a>

    <nav id="menu" class="menu" style="z-index:2">
      <header class="menu-header">
        <span class="menu-header-title">
          <a href="#/">Open Bible</a>
        </span>
        <span class="menu-header-icon">
          <a href="javascript:void(0)">
            <span class="glyphicon glyphicon-cog" aria-hidden="true"></span>
          </a>
        </span>
      </header>

      <section class="menu-section">
        <h3 class="menu-section-title">Old Testament</h3>
        <ul class="menu-section-list">
          <li ng-repeat="b in books|limitTo:39">
            <a href="javascript:void(0)" ng-class="{'active': b == book}" ng-click="setBook(b)">{{b.title}}</a>
          </li>
        </ul>
      </section>

      <section class="menu-section">
        <h3 class="menu-section-title">New Testament</h3>
        <ul class="menu-section-list">
          <li ng-repeat="b in books|limitTo:66:39">
            <a href="javascript:void(0)" ng-class="{'active': b == book}" ng-click="setBook(b)">{{b.title}}</a>
          </li>
        </ul>
      </section>
    </nav>

    <main id="panel" class="panel" style="z-index:3;">
      <center>
        <div class="book container" ng-controller="BookCtrl">

          <div class="book-title">{{book.title|uppercase}}</div>

        	<div infinite-scroll='text.addPage()' infinite-scroll-disabled='text.busy' infinite-scroll-distance='1'>
        		<div ng-repeat='item in text.items' class="{{module.font}}" ng-class="{'text-right': module.text=='right'}">
        			<span class="chapter" ng-if="item.chapter != 1">{{item.chapter}}</span>
        			<span class="text" ng-bind-html="item.text"></span>
        		</div>
        		<div class="loading" ng-show='text.busy'>
        			Loading..
        		</div>
        	</div>
        </div>
      </center>
    </main>

    <script>
      var slideout = new Slideout({
        'panel': document.getElementById('panel'),
        'menu': document.getElementById('menu'),
        'padding': 256,
        'tolerance': 70
      });
    </script>
  </body>
</html>
